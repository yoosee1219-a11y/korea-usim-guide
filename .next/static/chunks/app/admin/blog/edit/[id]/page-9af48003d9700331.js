(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[66],{9908:function(e,t,n){Promise.resolve().then(n.bind(n,7284))},7284:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return o}});var i=n(7437),a=n(9376),s=n(2265),l=n(6023),r=n(3974);function o(e){let{params:t}=e,n=(0,a.useRouter)(),[o,c]=(0,s.useState)(!1),[u,d]=(0,s.useState)(null),[h,f]=(0,s.useState)(!0);(0,s.useEffect)(()=>{if(!(0,l.C5)()){n.push("/admin/blog");return}c(!0),b()},[t.id,n]);let b=async()=>{try{let e=await fetch("/api/blog?slug=".concat(t.id)),n=await e.json();if(n.length>0)d(n[0]);else{let e=await fetch("/api/admin/blog"),n=(await e.json()).find(e=>e.id===t.id);d(n||null)}}catch(e){console.error("Failed to fetch post:",e)}finally{f(!1)}},m=async e=>{try{if((await fetch("/api/admin/blog",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,id:t.id})})).ok)alert("저장되었습니다!"),n.push("/admin/blog");else throw Error("Save failed")}catch(e){throw console.error("Save error:",e),e}};return!o||h?(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):u?(0,i.jsx)(r.Z,{initialData:u,onSave:m,onCancel:()=>{confirm("수정을 취소하시겠습니까?")&&n.push("/admin/blog")}}):(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("p",{className:"text-xl text-gray-600 mb-4",children:"글을 찾을 수 없습니다."}),(0,i.jsx)("button",{onClick:()=>n.push("/admin/blog"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"목록으로 돌아가기"})]})})}}},function(e){e.O(0,[458,46,971,117,744],function(){return e(e.s=9908)}),_N_E=e.O()}]);